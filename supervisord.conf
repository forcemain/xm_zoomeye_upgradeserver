[unix_http_server]
file=/var/run/supervisor.sock
chmod=0777
;; chown=root:root
username=root
password=qwertyuiop

[inet_http_server]
port=0.0.0.0:9001
username=root
password=qwertyuiop

[supervisord]
logfile=/var/log/supervisord.log
logfile_maxbytes=50MB
logfile_backups=10
loglevel=info
pidfile=/var/run/supervisord.pid
;; for docker run
nodaemon=true
minfds=1024
minprocs=200

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///var/run/supervisor.sock
username=root
password=qwertyuiop

[incloud]
files = supervisord/*.conf

[program:nginx]
environment=
process_name=%(program_name)s
user=root
startsecs=10
startretries=3
stopsignal=QUIT
;; for multi processes or threads
stopasgroup=true
killasgroup=true
stopwaitsecs=10
autostart=false
directory=/xm_workspace/xmcloud3.0/upgradeserver_lua/
stderr_logfile_maxbytes=100MB
stderr_logfile_backups=2
stderr_logfile=/xm_workspace/xmcloud3.0/upgradeserver_lua/logs/%(program_name)s/stderr.log
stdout_logfile_maxbytes=100MB
stdout_logfile_backups=2
stdout_logfile=/xm_workspace/xmcloud3.0/upgradeserver_lua/logs/%(program_name)s/stdout.log
;;
;; -c nginx config file
;; -p nginx path
;;
command=nginx

[program:upgradeserver_lua]
environment=
process_name=%(program_name)s
user=manmanli
startsecs=10
startretries=3
stopsignal=QUIT
;; for multi processes or threads
stopasgroup=true
killasgroup=true
stopwaitsecs=10
autostart=false
directory=/xm_workspace/xmcloud3.0/upgradeserver_lua/
stderr_logfile_maxbytes=100MB
stderr_logfile_backups=2
stderr_logfile=/xm_workspace/xmcloud3.0/upgradeserver_lua/logs/%(program_name)s/stderr.log
stdout_logfile_maxbytes=100MB
stdout_logfile_backups=2
stdout_logfile=/xm_workspace/xmcloud3.0/upgradeserver_lua/logs/%(program_name)s/stdout.log
;; 
;; --chdir          project root dir 
;; --wsgi-file      project wsgi file
;; --env            include DJANGO_SETTINGS_MODULE
;; --master         enable master process 
;; --pidfile        uwsgi process pid file 
;; --socket         uwsgi socket 
;; --processes      uwsgi workers number,peer worker peer thread default
;; --uid            uwsgi run with uid
;; --gid            uwsgi run with gid
;; --harakiri       uwsgi interface connect timeout(seconds)
;; --max-requests   uwsgi peer worker handler max-requests and the reused
;; --vacuum         try to remove all of the generated file/sockets with exit
;; --home           for set PYTHONHOME/virtualenv
;; --daemonize      for daemonize the uwsgi with logfile,not for supervisor
;; --touch-reload   for uwsgi reload with configure file modified or touched
;; --enable-threads for uwsgi enable threads with peer worker
;; --threads        for uwsgi peer worker thread number,like apache work mode
;; --post-buffering for uwsgi big post contents
;; --buffer-size    for uwsgi big cookies or query string
;;
;; --wsgi-disable-file-wrapper for dynamic generation file contents,like BytesIO/StringIO
;;
command=uwsgi --chdir=/xm_workspace/xmcloud3.0/upgradeserver_lua/ --wsgi-file=upgradeserver_lua/wsgi.py --env DJANGO_SETTINGS_MODULE=upgradeserver_lua.settings --master --pidfile=/var/run/django_stack_upgradeserver_lua.pid --socket=127.0.0.1:65534 --processes=4 --enable-threads --threads=4 --uid=root --gid=root --harakiri=20 --max-requests=5000 --vacuum --post-buffering=32768 --buffer-size=32768 --wsgi-disable-file-wrapper
